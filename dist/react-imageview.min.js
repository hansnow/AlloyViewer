module.exports=function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SingleImgView=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(1),h=i(l),u=n(2),c=i(u),p=n(3),d=i(p),f=n(4),b=n(5),g=i(b);n(6);var y=30,m=function(t){function e(t){o(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.initScale=1,n.screenWidth=window.innerWidth||window.screen.availWidth,n.screenHeight=window.innerHeight||window.screen.availHeight,n.list=null,n.ob=null,n.focused=null,n.arrLength=t.imagelist.length,n.state={current:t.current},n.onOrientationChange=n.onOrientationChange.bind(n),n}return a(e,t),r(e,[{key:"onOrientationChange",value:function(){var t=this;setTimeout(function(){t.screenWidth=window.innerWidth||window.screen.availWidth,t.screenHeight=window.innerHeight||window.screen.availHeight,t.changeIndex(t.state.current)},100)}},{key:"render",value:function(){var t=this,e=this.props,n=e.desc,i=e.disablePageNum,o=e.children,s=e.gap;return h.default.createElement("div",{className:"imageview"},h.default.createElement(c.default,{onSingleTap:this.onSingleTap.bind(this),onPressMove:this.onPressMove.bind(this),onSwipe:this.onSwipe.bind(this)},h.default.createElement("ul",{ref:function(e){t.list=e},className:"imagelist"},this.props.imagelist.map(function(e,n){return h.default.createElement("li",{className:"imagelist-item",style:{marginRight:s+"px"},key:"img"+n},h.default.createElement(c.default,{onPressMove:t.onPicPressMove.bind(t),onMultipointStart:t.onMultipointStart.bind(t),onLongTap:t.onLongTap.bind(t),onPinch:t.onPinch.bind(t),onRotate:t.onRotate.bind(t),onMultipointEnd:t.onMultipointEnd.bind(t),onDoubleTap:t.onDoubleTap.bind(t)},h.default.createElement(f.CenterImage,{id:"view"+n,className:"imagelist-item-img",lazysrc:e,index:n,current:t.state.current})))}))),i?null:h.default.createElement("div",{className:"page",ref:"page"},this.state.current+1," / ",this.arrLength),n?h.default.createElement("div",{dangerouslySetInnerHTML:{__html:n}}):null,o)}},{key:"componentDidMount",value:function(){var t=this.state.current,e=this.props,n=e.imagelist,i=e.initCallback;this.arrLength=n.length,(0,d.default)(this.list),t&&this.changeIndex(t,!1),this.bindStyle(t),i&&i(),window.addEventListener("orientationchange",this.onOrientationChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.onOrientationChange)}},{key:"onSingleTap",value:function(){this.props.close&&this.props.close()}},{key:"onPressMove",value:function(t){var e=this.state.current;this.endAnimation(),this.focused||(0===e&&t.deltaX>0||e===this.arrLength-1&&t.deltaX<0?this.list.translateX+=t.deltaX/3:this.list.translateX+=t.deltaX),t.preventDefault()}},{key:"onSwipe",value:function(t){var e=t.direction,n=this.state.current;if(this.focused)return!1;switch(e){case"Left":n<this.arrLength-1&&++n&&this.bindStyle(n);break;case"Right":n>0&&n--&&this.bindStyle(n)}this.changeIndex(n)}},{key:"onPicPressMove",value:function(t){var e=t.deltaX,n=t.deltaY,i=this.ob.getAttribute("long"),o=this.ob,s=o.scaleX,a=o.width;this.ob.scaleX<=1||t.touches.length>1||(this.ob&&this.checkBoundary(e,n)?(!i&&(this.ob.translateX+=e),this.ob.translateY+=n,i&&s*a===this.screenWidth?this.focused=!1:this.focused=!0):this.focused=!1)}},{key:"onMultipointStart",value:function(){this.initScale=this.ob.scaleX}},{key:"onPinch",value:function(t){if(this.props.disablePinch||this.ob.getAttribute("long"))return!1;this.ob.style.webkitTransition="cubic-bezier(.25,.01,.25,1)";var e=this.ob,n=e.originX,i=e.originY,o=t.center.x-this.screenWidth/2-document.body.scrollLeft,s=t.center.y-this.screenHeight/2-document.body.scrollTop;this.ob.originX=o,this.ob.originY=s,this.ob.translateX=this.ob.translateX+(o-n)*this.ob.scaleX,this.ob.translateY=this.ob.translateY+(s-i)*this.ob.scaleY,this.ob.scaleX=this.ob.scaleY=this.initScale*t.scale}},{key:"onRotate",value:function(t){return!(!this.props.enableRotate||this.ob.getAttribute("rate")>=3.5)&&(this.ob.style.webkitTransition="cubic-bezier(.25,.01,.25,1)",void(this.ob.rotateZ+=t.angle))}},{key:"onLongTap",value:function(){this.props.longTap&&this.props.longTap()}},{key:"onMultipointEnd",value:function(t){if(this.changeIndex(this.state.current),this.ob){this.ob.style.webkitTransition="300ms ease";var e=this.props.maxScale,n=this.ob.getAttribute("long");this.ob.scaleX<1&&this.restore(!1),this.ob.scaleX>e&&!n&&this.setScale(e);var i=this.ob.rotateZ%360,o=this.ob.getAttribute("rate");i<0&&(i=360+i),this.ob.rotateZ=i,i>0&&i<45?this.ob.rotateZ=0:i>=315?this.ob.rotateZ=360:i>=45&&i<135?(this.ob.rotateZ=90,this.setScale(o)):i>=135&&i<225?this.ob.rotateZ=180:i>=225&&i<315&&(this.ob.rotateZ=270,this.setScale(o))}}},{key:"onDoubleTap",value:function(t){if(this.props.disableDoubleTap)return!1;var e=t.origin,n=e[0]-this.screenWidth/2-document.body.scrollLeft,i=e[1]-this.screenHeight/2-document.body.scrollTop,o=this.ob.getAttribute("long");1===this.ob.scaleX?(!o&&(this.ob.translateX=this.ob.originX=n),!o&&(this.ob.translateY=this.ob.originY=i),this.setScale(o?this.screenWidth/this.ob.width:this.props.maxScale)):(this.ob.translateX=this.ob.originX,this.ob.translateY=this.ob.originY,this.setScale(1))}},{key:"bindStyle",value:function(t){var e=this;this.setState({current:t},function(){e.ob&&e.restore(),e.ob=document.getElementById("view"+t),e.ob&&!e.ob.scaleX&&(0,d.default)(e.ob);var n=e.refs.page;n&&(n.classList.remove("hide"),setTimeout(function(){n.classList.add("hide")},2e3))})}},{key:"changeIndex",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(this.list.style.webkitTransition="300ms ease"),this.list.translateX=-t*(this.screenWidth+this.props.gap),this.props.changeIndex&&this.props.changeIndex(t)}},{key:"setScale",value:function(t){this.ob.style.webkitTransition="300ms ease-in-out",this.ob.scaleX=this.ob.scaleY=t}},{key:"restore",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ob.translateX=this.ob.translateY=0,!!t&&(this.ob.rotateZ=0),this.ob.scaleX=this.ob.scaleY=1,this.ob.originX=this.ob.originY=0}},{key:"endAnimation",value:function(){this.list.style.webkitTransition="0",this.ob&&this.ob.style&&(this.ob.style.webkitTransition="0")}},{key:"checkBoundary",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.ob,i=n.scaleX,o=n.translateX,s=n.translateY,a=n.originX,r=n.originY,l=n.width,h=n.height,u=this.ob.getAttribute("rate");if(1!==i||i!==u){var c=(i-1)*(l/2+a)+a,p=-(i-1)*(l/2-a)+a,d=(i-1)*(h/2+r)+r,f=-(i-1)*(h/2-r)+r;if(o+t<=c&&o+t>=p&&s+e<=d&&s+e>=f)return!0}return!1}}]),e}(l.Component);m.defaultProps={gap:y,current:0,disablePageNum:!1,desc:"",maxScale:2},m.propTypes={gap:h.default.PropTypes.number,maxScale:h.default.PropTypes.number,current:h.default.PropTypes.number,imagelist:h.default.PropTypes.array.isRequired,disablePageNum:h.default.PropTypes.bool,disablePinch:h.default.PropTypes.bool,enableRotate:h.default.PropTypes.bool,disableDoubleTap:h.default.PropTypes.bool,longTap:h.default.PropTypes.func,close:h.default.PropTypes.func.isRequired,changeIndex:h.default.PropTypes.func,initCallback:h.default.PropTypes.func};e.SingleImgView=new g.default(m);e.default=m},function(t,e){t.exports=require("react")},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(1),h=i(l),u=function(t){function e(t){o(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.preV={x:null,y:null},n.pinchStartLen=null,n.scale=1,n.isDoubleTap=!1,n.delta=null,n.last=null,n.now=null,n.end=null,n.multiTouch=!1,n.tapTimeout=null,n.longTapTimeout=null,n.singleTapTimeout=null,n.swipeTimeout=null,n.x1=n.x2=n.y1=n.y2=null,n.preTapPosition={x:null,y:null},n}return a(e,t),r(e,[{key:"getLen",value:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"getAngle",value:function(t,e){var n=this.getLen(t)*this.getLen(e);if(0===n)return 0;var i=this.dot(t,e)/n;return i>1&&(i=1),Math.acos(i)}},{key:"cross",value:function(t,e){return t.x*e.y-e.x*t.y}},{key:"getRotateAngle",value:function(t,e){var n=this.getAngle(t,e);return this.cross(t,e)>0&&(n*=-1),180*n/Math.PI}},{key:"_resetState",value:function(){this.setState({x:null,y:null,swiping:!1,start:0})}},{key:"_emitEvent",value:function(t){if(this.props[t]){for(var e,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];(e=this.props)[t].apply(e,i)}}},{key:"_handleTouchStart",value:function(t){var e=this;if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV,i=t.touches.length;if(i>1){this._cancelLongTap(),this._cancelSingleTap();var o={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};n.x=o.x,n.y=o.y,this.pinchStartLen=this.getLen(n),this._emitEvent("onMultipointStart",t)}this.longTapTimeout=setTimeout(function(){e._emitEvent("onLongTap",t)},750)}}},{key:"_handleTouchMove",value:function(t){var e=this.preV,n=t.touches.length,i=t.touches[0].pageX,o=t.touches[0].pageY;if(this.isDoubleTap=!1,n>1){var s={x:t.touches[1].pageX-i,y:t.touches[1].pageY-o};null!==e.x&&(this.pinchStartLen>0&&(t.center={x:(t.touches[1].pageX+i)/2,y:(t.touches[1].pageY+o)/2},t.scale=this.getLen(s)/this.pinchStartLen,this._emitEvent("onPinch",t)),t.angle=this.getRotateAngle(s,e),this._emitEvent("onRotate",t)),e.x=s.x,e.y=s.y,this.multiTouch=!0}else null!==this.x2?(t.deltaX=i-this.x2,t.deltaY=o-this.y2):(t.deltaX=0,t.deltaY=0),this._emitEvent("onPressMove",t);this._cancelLongTap(),this.x2=i,this.y2=o,n>1&&t.preventDefault()}},{key:"_handleTouchCancel",value:function(){clearInterval(this.singleTapTimeout),clearInterval(this.tapTimeout),clearInterval(this.longTapTimeout),clearInterval(this.swipeTimeout)}},{key:"_handleTouchEnd",value:function(t){var e=this;this.end=Date.now(),this._cancelLongTap(),t.touches.length<2&&this._emitEvent("onMultipointEnd",t),t.origin=[this.x1,this.y1],this.multiTouch===!1&&(this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.preV.y-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),t.distance=Math.abs(this.x1-this.x2),this.swipeTimeout=setTimeout(function(){e._emitEvent("onSwipe",t)},0)):this.tapTimeout=setTimeout(function(){e._emitEvent("onTap",t),e.isDoubleTap?(e._emitEvent("onDoubleTap",t),clearTimeout(e.singleTapTimeout),e.isDoubleTap=!1):e.singleTapTimeout=setTimeout(function(){e._emitEvent("onSingleTap",t)},250)},0)),this.preV.x=0,this.preV.y=0,this.scale=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null,this.multiTouch=!1}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(t,e,n,i){return Math.abs(t-e)>80||this.end-this.now<250?Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down":"Nochange"}},{key:"render",value:function(){return h.default.cloneElement(h.default.Children.only(this.props.children),{onTouchStart:this._handleTouchStart.bind(this),onTouchMove:this._handleTouchMove.bind(this),onTouchCancel:this._handleTouchCancel.bind(this),onTouchEnd:this._handleTouchEnd.bind(this)})}}]),e}(l.Component);e.default=u},function(t,e){"use strict";function n(t,e,n){for(var o=0,s=e.length;o<s;o++){var a=e[o];i(t,a,n)}}function i(t,e,n){Object.defineProperty(t,e,{get:function(){return this["__"+e]},set:function(t){t!==this["__"+e]&&(this["__"+e]=t,n())}})}var o=function(t,e,n,i,o,s,a,r,l,h,u,c,p,d,f,b){this.elements=window.Float32Array?new Float32Array(16):[];var g=this.elements;g[0]=void 0!==t?t:1,g[4]=e||0,g[8]=n||0,g[12]=i||0,g[1]=o||0,g[5]=void 0!==s?s:1,g[9]=a||0,g[13]=r||0,g[2]=l||0,g[6]=h||0,g[10]=void 0!==u?u:1,g[14]=c||0,g[3]=p||0,g[7]=d||0,g[11]=f||0,g[15]=void 0!==b?b:1};o.DEG_TO_RAD=Math.PI/180,o.prototype={set:function(t,e,n,i,o,s,a,r,l,h,u,c,p,d,f,b){var g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=r,g[2]=l,g[6]=h,g[10]=u,g[14]=c,g[3]=p,g[7]=d,g[11]=f,g[15]=b,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],r=n[12],l=n[1],h=n[5],u=n[9],c=n[13],p=n[2],d=n[6],f=n[10],b=n[14],g=n[3],y=n[7],m=n[11],v=n[15],T=e[0],w=e[1],_=e[2],x=e[3],k=e[4],M=e[5],P=e[6],E=e[7],X=e[8],O=e[9],S=e[10],Y=e[11],D=e[12],L=e[13],A=e[14],I=e[15];return i[0]=o*T+s*k+a*X+r*D,i[4]=o*w+s*M+a*O+r*L,i[8]=o*_+s*P+a*S+r*A,i[12]=o*x+s*E+a*Y+r*I,i[1]=l*T+h*k+u*X+c*D,i[5]=l*w+h*M+u*O+c*L,i[9]=l*_+h*P+u*S+c*A,i[13]=l*x+h*E+u*Y+c*I,i[2]=p*T+d*k+f*X+b*D,i[6]=p*w+d*M+f*O+b*L,i[10]=p*_+d*P+f*S+b*A,i[14]=p*x+d*E+f*Y+b*I,i[3]=g*T+y*k+m*X+v*D,i[7]=g*w+y*M+m*O+v*L,i[11]=g*_+y*P+m*S+v*A,i[15]=g*x+y*E+m*Y+v*I,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},appendTransform:function(t,e,n,i,s,a,r,l,h,u,c,p,d,f){var b=r*o.DEG_TO_RAD,g=this._rounded(Math.cos(b)),y=this._rounded(Math.sin(b)),m=l*o.DEG_TO_RAD,v=this._rounded(Math.cos(m)),T=this._rounded(Math.sin(m)),w=h*o.DEG_TO_RAD,_=this._rounded(Math.cos(w*-1)),x=this._rounded(Math.sin(w*-1));return this.multiplyMatrices(this,[1,0,0,t,0,g,y,e,0,-y,g,n,0,0,0,1]),this.multiplyMatrices(this,[v,0,T,0,0,1,0,0,-T,0,v,0,0,0,0,1]),this.multiplyMatrices(this,[_*i,x*s,0,0,-x*i,_*s,0,0,0,0,1*a,0,0,0,0,1]),(u||c)&&this.multiplyMatrices(this,[this._rounded(Math.cos(u*o.DEG_TO_RAD)),this._rounded(Math.sin(u*o.DEG_TO_RAD)),0,0,-1*this._rounded(Math.sin(c*o.DEG_TO_RAD)),this._rounded(Math.cos(c*o.DEG_TO_RAD)),0,0,0,0,1,0,0,0,0,1]),(p||d||f)&&(this.elements[12]-=p*this.elements[0]+d*this.elements[4]+f*this.elements[8],this.elements[13]-=p*this.elements[1]+d*this.elements[5]+f*this.elements[9],this.elements[14]-=p*this.elements[2]+d*this.elements[6]+f*this.elements[10]),this}};var s=function(t){n(t,["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],function(){var e=t.matrix3D.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ);t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(e.elements).join(",")+")"}),n(t,["perspective"],function(){t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(t.matrix3D.elements).join(",")+")"}),t.matrix3D=new o,t.perspective=500,t.scaleX=t.scaleY=t.scaleZ=1,t.translateX=t.translateY=t.translateZ=t.rotateX=t.rotateY=t.rotateZ=t.skewX=t.skewY=t.originX=t.originY=t.originZ=0};t.exports=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CenterImage=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),c=i(u),p=3,d=(e.CenterImage=function(t){function e(){var t,n,i,o;s(this,e);for(var r=arguments.length,l=Array(r),h=0;h<r;h++)l[h]=arguments[h];return n=i=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),i.state={loading:!0,error:!1,loaded:!1},o=n,a(i,o)}return r(e,t),h(e,[{key:"render",value:function(){var t=this.state,e=t.loading,n=t.error,i=this.props,s=i.index,a=i.current,r=i.lazysrc,h=o(i,["index","current","lazysrc"]),u=c.default.createElement("img",l({onLoad:this.onImgLoad.bind(this),src:r},h));return s===a?u:e?c.default.createElement(d,null):n?c.default.createElement(f,null):u}},{key:"componentWillMount",value:function(){this.loadImg()}},{key:"componentWillReceiveProps",value:function(t){!this.state.loaded&&this.loadImg()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("orientationchange",this.onOrientationChange)}},{key:"loadImg",value:function(){var t=this,e=this.props,n=e.index,i=e.current,o=e.lazysrc;if(o&&n<=i+p&&n>=i-p){var s=new Image;s.src=o,s.onload=function(){t.setState({loading:!1})},s.onerror=function(){t.setState({loading:!1,error:!0})}}}},{key:"onOrientationChange",value:function(t){var e=this;setTimeout(function(){e.onImgLoad({target:t})},100)}},{key:"onImgLoad",value:function(t){this.state.loaded||(this.onOrientationChange=this.onOrientationChange.bind(this,t.target),window.addEventListener("orientationchange",this.onOrientationChange)),this.setState({loaded:!0});var e=t.target,n=e.naturalHeight,i=e.naturalWidth,o=n/i,s=window.innerHeight||window.screen.availHeight,a=window.innerWidth||window.screen.availWidth,r=s/a,l={};o>=3.5&&e.setAttribute("long",!0),o>r?(l.height=s+"px",l.width=i*s/n+"px",l.left=a/2-i*s/n/2+"px"):o<r?(l.width=a+"px",l.height=n*a/i+"px",l.top=s/2-n*a/i/2+"px"):(l.width=a,l.height=s),e.setAttribute("style","width:"+l.width+"; height:"+l.height+"; left:"+l.left+"; top:"+l.top+";"),e.setAttribute("rate",1/o)}}]),e}(u.Component),function(){return c.default.createElement("div",{className:"spinner"},c.default.createElement("div",{className:"double-bounce1"}),c.default.createElement("div",{className:"double-bounce2"}))}),f=function(){return c.default.createElement("div",{className:"errorpage"},"加载失败")}},function(t,e){t.exports=require("react-singleton")},function(t,e){}]);